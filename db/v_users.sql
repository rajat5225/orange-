create view v_users as (SELECT r.role, COALESCE(v.vehicle_type,"") vehicle_type, COALESCE(v.image,"") vehicle_image, COALESCE(v.price,"") vehicle_price, COALESCE(v.distance_time,"") distance_time, COALESCE(v.driver_charge,"") driver_charge, COALESCE((select round(avg(ratings.rating)) from ratings where ratings.parent_id = u.id),"") rating, (select currency_symbol from countries where countries.name = u.country) as currency_symbol, ur.user_id, ur.role_id, u.id, u.name, u.email, u.phone_no,u.city, u.password, u.profile_picture, u.registration_number, u.number_plate, u.vehicle_manufacturer, u.vehicle_model, u.vehicle_type_id, u.vehicle_color, u.device_id, u.device_token, u.device_type, u.latitude, u.longitude, u.payment_method, u.is_verified, u.is_visible, u.status, u.user_status, u.created_at, u.updated_at FROM users u left join user_roles ur on u.id = ur.user_id left join roles r on ur.role_id = r.id left join vehicle_types v on v.id = u.vehicle_type_id order by id)
